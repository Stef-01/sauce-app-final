# University Hub - Technical & Functional Specification (v1.0)

## 1. Core Objective
This document provides a detailed technical and functional specification for the University Hub application (v1.0). Its purpose is to create a definitive "source of truth" for the application's logic and user journeys. This guide is designed to be clear and comprehensive enough to allow a development team to re-implement the exact same functionality within a completely different user interface or technical architecture (e.g., migrating from this web app to a new mobile app).

## 2. Internships Portal (Landing Page)
-   **File**: `pages/InternshipsLandingPage.tsx`
-   **Purpose**: To act as the primary entry point for the "Internships" section of the application. Its sole function is to clearly and efficiently direct users to the correct experience based on their role: "Student" or "Business".

### Core Functionality (Technical Breakdown)
-   This is a stateless, presentational component.
-   It receives a single prop: `navigate: (page: Page) => void` from the main `App.tsx` orchestrator.
-   It renders two large, clickable card components.
-   The "For Students" card has an `onClick` handler that calls `navigate('projects-list')`.
-   The "For Businesses" card has an `onClick` handler that calls `navigate('project-refiner')`.
-   There is no internal state management or calls to external services. Its logic is purely navigational.

### User Workflow (Click-Through Documentation)
1.  **Entry Point**: The user is on any page within the application and clicks the "Internships" link in the main header navigation.
2.  **System Response**: The application's state-based router in `App.tsx` sets the `activePage` to 'Internships', which renders the `InternshipsLandingPage` component.
3.  **User Action (Path A - Student)**: The user identifies as a student and clicks the "For Students" card.
4.  **System Response (Path A)**: The `onClick` event fires, calling `navigate('projects-list')`. The `App.tsx` component updates its state, and the `ProjectsListPage` is rendered.
5.  **User Action (Path B - Business)**: The user identifies as a business representative and clicks the "For Businesses" card.
6.  **System Response (Path B)**: The `onClick` event fires, calling `navigate('project-refiner')`. The `App.tsx` component updates its state, and the `ProjectRefinerPage` is rendered.

## 3. AI Project Refiner
-   **File**: `pages/ProjectRefinerPage.tsx`
-   **Purpose**: To provide a guided, conversational experience for business users to transform a vague project idea into a complete, structured, and well-defined internship brief. This is the core AI-powered feature of the application.

### Core Functionality (Technical Breakdown)
-   **State Management**: This is a stateful component that manages the entire lifecycle of a project brief creation session. Key state variables include:
    -   `chatHistory: ChatMessage[]`: An array of message objects that constitutes the conversation log.
    -   `userInput: string`: The current value of the user's input in the text area.
    -   `isLoading: boolean`: A flag that indicates when the app is waiting for a response from the AI. Used to show loading indicators and disable the input field.
    -   `projectBrief: Omit<ProjectBrief, 'id'> | null`: Holds the structured project brief object once it's successfully generated by the AI.
    -   `uploadedFiles: FileUploadInfo[]`: An array of objects containing the name, type, and Base64-encoded content of any files uploaded by the user for context.
-   **Lifecycle**:
    -   On `useEffect` (mount), the `chatHistory` is initialized with a greeting message from the AI model.
-   **Primary Logic (`handleSendMessage`)**:
    1.  Appends the user's message to `chatHistory`.
    2.  Sets `isLoading` to `true`.
    3.  Constructs a `fileContext` string from the `uploadedFiles` state.
    4.  Calls `geminiService.generateProjectBrief`, passing the full conversation history and file context.
    5.  **Conditional Path A (Brief Generated)**: If the service returns a valid brief object, the component updates the `projectBrief` state and adds a final confirmation message to the `chatHistory`.
    6.  **Conditional Path B (More Info Needed)**: If the service returns `null` (because the AI determined information was missing), the component then calls `geminiService.generateFollowUpQuestion`. The returned question string is then added to the `chatHistory`.
-   **File Handling**: The component uses a hidden file input. When files are selected, the `handleFileChange` function reads each file using `FileReader`, converts it to a Base64 string, and stores it in the `uploadedFiles` state.
-   **Saving**: When the "Save Project to List" button (in the `ProjectBriefPreview` component) is clicked, it triggers the `onSaveProject` prop, passing the `projectBrief` state up to `App.tsx`.

### User Workflow (Click-Through Documentation)
1.  **Entry Point**: The user arrives at the `ProjectRefinerPage` after clicking "For Businesses".
2.  **Initial View**: The system displays a two-panel layout. The left panel shows a chat interface with an initial greeting from the AI. The right panel (`ProjectBriefPreview`) shows a placeholder message: "Project Brief will appear here".
3.  **User Action**: The user types their initial idea into the text area (e.g., "We need a social media campaign for our new product launch"). They may optionally click the "Upload" icon to attach a document with more details.
4.  **System Response**: The user's message appears in the chat on the right. An animated loading indicator appears in the chat on the left. The input field and send button are disabled.
5.  **AI Interaction (Loop)**: The system sends the conversation to the `geminiService`. The AI determines it needs more information (e.g., about the target audience). It returns a follow-up question.
6.  **System Response**: The loading indicator is replaced with the AI's question ("Great, who is the target audience for this campaign?"). The input field is re-enabled.
7.  **User Action**: The user answers the question and sends the message. The loop from step 4 repeats.
8.  **AI Interaction (Success)**: After several exchanges, the user has provided all necessary details. When they send their last message, the system sends the full context to the `geminiService`. This time, the AI returns a complete, structured JSON object for the project brief.
9.  **System Response**:
    -   The `ProjectBriefPreview` panel on the right populates with the fully formatted brief, including sections for Scope, Technologies, Deliverables, etc.
    -   The AI sends a final message in the chat: "Excellent! Based on our conversation, I've generated a complete project brief..."
10. **User Action**: The user reviews the generated brief. They can either continue the conversation to refine it further or click the "Save Project to List" button.
11. **System Response**: When "Save Project" is clicked, the system saves the brief to the database (or localStorage) and immediately navigates the user to the `ProjectsListPage`, where the new project is now visible at the top of the list.

## 4. Available Projects List
-   **File**: `pages/ProjectsListPage.tsx`
-   **Purpose**: To provide a central, browsable repository of all available internship projects for students.

### Core Functionality (Technical Breakdown)
-   This is a stateless, presentational component.
-   It receives the global `projects: ProjectBrief[]` array as a prop from `App.tsx`.
-   Its primary logic is to `map` over the `projects` array and render a `ProjectCard` component for each item.
-   It includes a conditional check: if `projects.length` is 0, it renders a user-friendly "empty state" message instead of the project grid.

### User Workflow (Click-Through Documentation)
1.  **Entry Point**: The user arrives at the page, typically after clicking "For Students" on the `InternshipsLandingPage`.
2.  **System Response**: The system renders the page header "Available Projects".
3.  **Conditional View A (Projects Exist)**: The system renders a grid of `ProjectCard` components. Each card clearly displays the project's title, company, summary, and key details like technologies and compensation.
4.  **Conditional View B (No Projects)**: If no projects have been created yet, the system renders a message: "No projects available at the moment. Try creating a new one with the Project Refiner!"
5.  **User Action**: The user can scroll through the list to view all available opportunities. They can click the "Apply Now" button on any card (note: in this version, the button is presentational and does not trigger an application flow).

## 5. Community, Buzz, and Profile Pages
-   **Files**: `pages/CommunityPage.tsx`, `pages/BuzzPage.tsx`, `pages/ProfilePage.tsx`
-   **Purpose**: To establish the structure and user interface for the application's other core features.

### Core Functionality (Technical Breakdown)
-   All three are stateless, presentational components.
-   They do not receive props related to application logic.
-   Their content is hardcoded using mock data arrays defined directly within each file.
-   They serve as visual prototypes and do not contain any interactive logic (e.g., clicking "like" or "reply" does not trigger any state changes).

### User Workflow (Click-Through Documentation)
1.  **Entry Point**: The user clicks "Community", "Buzz", or "Profile" in the main header navigation.
2.  **System Response**: The application's router in `App.tsx` renders the corresponding page component.
3.  **User Action**: The user can view the static, mock content on the page to understand its intended layout and purpose. For example, on the `CommunityPage`, they can see a list of mock forum posts. On the `ProfilePage`, they can see a mock user profile. No further interaction is possible on these pages in the current implementation.
